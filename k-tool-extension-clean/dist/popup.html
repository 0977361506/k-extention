<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>K-Tool Settings</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="popup-container">
      <!-- Header -->
      <div class="header">
        <div class="header-content">
          <img src="assets/icon.png" alt="K-Tool" class="logo" />
          <h1 class="title">K-Tool Document</h1>
          <div class="status-indicator">
            <span class="status-text" id="statusText">T·∫Øt</span>
            <label class="switch">
              <input type="checkbox" id="enabledSwitch" />
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>

      <!-- Save Status -->
      <div class="save-status" id="saveStatus" style="display: none">
        <div class="save-icon" id="saveIcon">üíæ</div>
        <span class="save-text" id="saveText">ƒêang l∆∞u...</span>
      </div>

      <!-- Form -->
      <form class="settings-form" id="settingsForm">
        <!-- API Key -->
        <div class="form-group">
          <label for="apiKey" class="form-label">
            <span class="label-icon">üîë</span>
            API Key *
          </label>
          <input
            type="password"
            id="apiKey"
            class="form-input"
            placeholder="Nh·∫≠p API key c·ªßa b·∫°n"
            required
          />
          <div class="error-message" id="apiKeyError"></div>
        </div>

        <!-- Model Selection -->
        <div class="form-group">
          <label for="selectedModel" class="form-label">
            <span class="label-icon">ü§ñ</span>
            AI Model *
          </label>
          <select id="selectedModel" class="form-select" required>
            <option value="sonar-pro">Perplexity - Sonar Pro</option>
            <option value="gemini">Google - Gemini 2.0 Flash</option>
          </select>
          <div class="error-message" id="selectedModelError"></div>
        </div>

        <!-- URL Template -->
        <div class="form-group">
          <label for="urlTemplate" class="form-label">
            <span class="label-icon">üîó</span>
            URL Template *
          </label>
          <input
            type="url"
            id="urlTemplate"
            class="form-input"
            placeholder="https://example.com/template/{pageId}"
            required
          />
          <div class="help-text">
            Link t√†i li·ªáu template c·ªßa d·ª± √°n (ph·∫£i ch·ª©a {pageId})
          </div>
          <div class="error-message" id="urlTemplateError"></div>
        </div>

        <!-- Document URL -->
        <div class="form-group">
          <label for="documentUrl" class="form-label">
            <span class="label-icon">üìÑ</span>
            URL T√†i li·ªáu *
          </label>
          <input
            type="url"
            id="documentUrl"
            class="form-input"
            placeholder="https://confluence.com/folder/documents"
            required
          />
          <div class="help-text">
            URL folder b·∫°n ƒë·∫∑t t√†i li·ªáu chi ti·∫øt khi AI tr·∫£ l·ªùi
          </div>
          <div class="error-message" id="documentUrlError"></div>
        </div>

        <!-- Database URL -->
        <div class="form-group">
          <label for="databaseUrl" class="form-label">
            <span class="label-icon">üóÑÔ∏è</span>
            URL Database *
          </label>
          <input
            type="url"
            id="databaseUrl"
            class="form-input"
            placeholder="https://confluence.com/folder/database"
            required
          />
          <div class="help-text">Th∆∞ m·ª•c t√†i li·ªáu c√°c b·∫£ng trong database</div>
          <div class="error-message" id="databaseUrlError"></div>
        </div>

        <!-- Instruction URL -->
        <div class="form-group">
          <label for="instructionUrl" class="form-label">
            <span class="label-icon">üìã</span>
            URL Instructions
          </label>
          <input
            type="url"
            id="instructionUrl"
            class="form-input"
            placeholder="https://confluence.com/instructions"
          />
          <div class="help-text">
            B·ªï sung th√™m t√†i li·ªáu h·ªá th·ªëng ƒë·ªÉ AI hi·ªÉu r√µ h∆°n
          </div>
          <div class="error-message" id="instructionUrlError"></div>
        </div>

        <!-- Custom Prompt -->
        <div class="form-group">
          <label for="customPrompt" class="form-label">
            <span class="label-icon">üß†</span>
            Custom Prompt AI *
          </label>
          <textarea
            id="customPrompt"
            class="form-textarea"
            rows="4"
            placeholder="Nh·∫≠p prompt t√πy ch·ªânh cho AI..."
            required
          ></textarea>
          <div class="help-text">
            <span>Prompt n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng l√†m ng·ªØ c·∫£nh cho AI</span>
            <span class="char-count" id="charCount">0 k√Ω t·ª±</span>
          </div>
          <div class="error-message" id="customPromptError"></div>
        </div>
      </form>

      <!-- Footer -->
      <div class="footer">
        <div class="version">K-Tool Document v2.0 - Auto Save</div>
        <button type="button" class="reset-btn" id="resetBtn">Reset</button>
      </div>
    </div>

    <script type="module" src="popup.js"></script>
  </body>
</html>
